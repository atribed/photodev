module.exports=function(a){a.initConfig({pkg:a.file.readJSON("package.json"),uglify:{my_target:{options:{sourceMap:!0,sourceMapName:"path/to/sourcemap.map"},files:{"build/output.min.js":["*.js","public/*.js"]}}},jshint:{files:["*.js","public/*.js"],options:{ignores:["node_modules"]}}}),a.loadNpmTasks("grunt-contrib-uglify"),a.loadNpmTasks("grunt-contrib-jshint"),a.registerTask("build",["uglify","jshint"])};var schema=require("./model.js"),FilmModel=schema();exports.getAll=function(a,b){return FilmModel.find(function(a,c){return a?console.log(a):b.send(c)})},exports.getByDev=function(a,b){var c=FilmModel.where({developer:a.params.developer});return c.find(a.params.developer).find(function(a,c){return a?console.log(a):b.send(c)})},exports.getById=function(a,b){return FilmModel.findById(a.params.id,function(a,c){return a?console.log(a):b.send(c)})},exports.post=function(a,b){var c=new FilmModel({developer:a.body.developer,film:a.body.film,iso:a.body.iso,solution:a.body.solution,time:a.body.time});return c.save(function(a){return a?console.log(a):console.log("success: ",c)}),b.send(c)},exports.remove=function(a,b){return FilmModel.findById(a.params.id,function(a,c){return c.remove(function(a){a?console.log(a):(console.log(c.id+" removed."),b.send(""))})})};var http=require("http"),express=require("express"),path=require("path"),mongoose=require("mongoose"),bodyParser=require("body-parser"),errorhandler=require("errorhandler"),devApp=express(),db=mongoose.connect("mongodb://localhost/devwork");mongoose.connection.once("connected",function(){console.log("Connected to db devwork.")}),devApp.use(bodyParser.urlencoded({extended:!0})),devApp.use(express.static(path.join(__dirname+"/public"))),devApp.use(errorhandler());var api=require("./api.js");devApp.get("/api",function(a,b){b.send("API is running")}),devApp.get("/api/films",api.getAll),devApp.get("/api/films/:id",api.getById),devApp.get("/api/films/developer/:developer",api.getByDev),devApp.post("/api/films",api.post),devApp.delete("/api/films/:id",api.remove),devApp.listen(9090);var mongoose=require("mongoose"),Schema=mongoose.Schema,Film=new Schema({developer:{type:String,required:!0},film:{type:String,required:!0},iso:{type:String,required:!0},solution:{type:String,required:!0},time:{type:Number,required:!1}}),FilmModel=mongoose.model("Film",Film);module.exports=function(){return FilmModel};var currentEndAngle=0,currentStartAngle=0,currentColor="black",lineRadius=75,lineWidth=15,count=0,animateClock=function(){count++,console.log(count);var a,b,c=document.getElementById("circleTimer"),d=c.getContext("2d"),e=(c.width/2,c.height/2,currentStartAngle*Math.PI),f=currentEndAngle*Math.PI;currentStartAngle=currentEndAngle-.1,currentEndAngle+=.1,a=lineRadius,b=lineWidth,d.beginPath(),d.arc(50,50,a,e,f,!1),d.lineWidth=10,d.strokeStyle="#000000",d.lineCap="round",d.stroke()};setInterval(animateClock,1e3),animateClock();var TIMES={DEV:null,FIXER:null,HYPO:120,STOPBATH:30,RINSE:300},TIMER_RUNNING=!1,TIMER_STEP=0,getRequest=function(a){var b=null;b=new XMLHttpRequest,b.open("GET",a,!1),b.send(null);var c=b.responseText;return console.log("response: ",c),JSON.parse(c)},displayFilms=function(){var a=document.getElementById("selectDev"),b="/api/films/developer/"+a.value,c=getRequest(b),d=c.length,e=document.getElementById("display");e.innerHTML="";for(var f=0;d>f;f++){var g=document.createElement("input");g.id=c[f]._id,g.type="checkbox",g.className="film-input",g.setAttribute("data-devtime",c[f].time),e.appendChild(g);var h=c[f].film+"<br>";e.innerHTML+=h}},updateFilmOnChange=function(){document.getElementById("selectDev").addEventListener("change",displayFilms,!1)},setTime=function(a){if("film-input"===a.target.className&&a.target.checked===!0){var b=document.getElementById("times"),c=a.target.getAttribute("data-devtime"),d=parseInt(c);TIMES.DEV=d;var e=d/60;startTimerListener(),b.innerHTML="Development Time: "+e+" minutes"}},updateTimeOnChange=function(){var a=document.getElementById("display");a.addEventListener("change",setTime,!1)},printTimer=function(a,b){TIMER_RUNNING=!0;var c=document.getElementById("timer"),d=setInterval(function(){if(0>=a)TIMER_RUNNING=!1,c.innerHTML=b,clearInterval(d);else{a-=1;var e=Math.floor(a/60),f=a%60,g=f>9?f:"0"+f;c.innerHTML=e+":"+g}},1e3)},startTimer=function(){switch(TIMER_STEP){case 0:document.getElementById("timerHeader").style.display="block",TIMER_STEP++,printTimer(TIMES.DEV,"DEV COMPLETE");break;case 1:TIMER_STEP++,printTimer(TIMES.STOPBATH,"STOPBATH COMPLETE");break;case 2:TIMER_STEP++;var a=document.getElementById("rapid");TIMES.FIXER=a.checked?120:600,printTimer(TIMES.FIXER,"FIXER COMPLETE");break;case 3:TIMER_STEP++,printTimer(TIMES.HYPO,"HYPO COMPLETE");break;case 4:printTimer(TIMES.RINSE,"RINSE COMPLETE");break;default:console.log("oops")}},startTimerListener=function(){var a=function(a){TIMER_RUNNING===!1&&32===a.keyCode&&startTimer()};window.addEventListener("keydown",a,!1),document.getElementById("startTime").addEventListener("click",startTimer,!1)};updateTimeOnChange(),updateFilmOnChange();
//# sourceMappingURL=../path/to/sourcemap.map